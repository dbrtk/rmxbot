
import os
import stat


HERE = os.path.abspath(__file__)

SCRIPTS = os.path.abspath(os.path.join(
    HERE, os.pardir, os.pardir, os.pardir, 'bin'))
if not os.path.isdir(SCRIPTS):
    raise RuntimeError(SCRIPTS)

SEARCH_CORPUS_SH = os.path.join(SCRIPTS, 'search_corpus.sh')
# os.chmod(SEARCH_CORPUS_SH, stat.S_IRWXU | stat.S_IRWXG | stat.S_IRWXO)


DEFAULT_CRAWL_DEPTH = 2

NLP_REMOTE_WORKER = True

# NLP_ENDPOINT = 'http://nlp.proximity-bot.net'
NLP_ENDPOINT = 'http://nlpweb:8001'
NLP_DENDOGRAM = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'dendogram'])

NLP_GENERATE_MATRICES = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'generate-matrices'])

NLP_GENERATE_FEATURES_WEIGTHS = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'generate-features-weights'])
NLP_COMPUTE_MATRICES = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'compute-matrices'])

NLP_GENERATE_ALL = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'generate-all'])

NLP_FEATURES_AND_DOCS_ENDPOINT = '/'.join(
    s for s in [NLP_ENDPOINT, 'nlp', 'features-docs'])

SCRASYNC_REMOTE_WORKER = True

# SCRASYNC_ENDPOINT = 'http://scrasync.proximity-bot.net'
SCRASYNC_ENDPOINT = 'http://scrasyncweb:8002'

SCRASYNC_CREATE = '/'.join(
    s for s in [SCRASYNC_ENDPOINT, 'scrasync', 'create'])
if not SCRASYNC_CREATE.endswith('/'):
    SCRASYNC_CREATE = '{}/'.format(SCRASYNC_CREATE)

SCRASYNC_CRAWL_READY = '/'.join(
    s for s in [SCRASYNC_ENDPOINT, 'scrasync', 'crawl-ready'])
if not SCRASYNC_CRAWL_READY.endswith('/'):
    SCRASYNC_CRAWL_READY = '{}/'.format(SCRASYNC_CRAWL_READY)

# Configurations that are related to the corpus and its data storage
# DATA_ROOT is the path to the directory that will store corpora and data
# generated by rmxbot
DATA_ROOT = '/data'

# the tmp directory used by rmxbot when processing files, etc...
# TMP_DATA_DIR = '/data/tmp'
TMP_DATA_DIR = '/tmp'

# The path to the directory where corpora along with matrices are stored.
CORPUS_ROOT = os.path.join(DATA_ROOT, 'corpus')

CORPUS_MAX_SIZE = 400

# DATABASE configuration - MONGODB
MONGODB_NAME = 'rmx'
# MONGODB_LOCATION = '127.0.0.1'
MONGODB_LOCATION = 'mongodb'
MONGODB_PORT = 27017
MONGODB_USR = 'dbuser_if_any'
MONGODB_PWD = 'password_if_any'

# names given to the mongodb collections
DATA_COLL = 'data'
IMAGE_COLL = 'image'
CORPUS_COLL = 'corpus'
CLUSTER_COLL = 'cluster'
